<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      http-equiv="Cache-Control"
      content="no-cache, no-store, must-revalidate"/>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta http-equiv="Cache-Control" content="no-cache" />

    <link rel="stylesheet" href="/css/admin-schedule.css" />
    <title>Dashboard</title>
    <!-- font awesome link -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <!-- font awesome link -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
    <script>
            document.addEventListener('DOMContentLoaded', function() {
      // Central events array to store all calendar events
      var events = [{
        title: 'Conference Start',
        start: '2024-05-03T09:30',
        end: '2024-05-04T11:25',
        color: '#3867d6',
        textcolor: '#fff'
      }];

      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth',
        headerToolbar: {
          left: 'prev,next today',
          center: 'title',
          right: 'dayGridMonth,listWeek,listDay'
        },
        views: {
            dayGridMonth: {buttonText: 'Month'},
            listDay: { buttonText: 'Day' },
            listWeek: { buttonText: 'Week' },
            today: {buttonText: 'Today'}
          },
        events: events, // Use the central events array to populate the calendar

      });

      calendar.render();

        // Function to fetch data from form and update calendar events
        function updateCalendar() {
          const form = document.querySelector('#event-info');
          const formData = new FormData(form);
          const data = {};
          for (let [key, value] of formData.entries()) {
            data[key] = value;
          }
          const eventTime = data['event-time'];
          const [hours, minutes] = eventTime.split(':');
          const date = new Date(data.date);
          date.setHours(hours, minutes);
          calendar.addEvent({ title: data.description, start: date});
        }

        // Event listener for form submission
          document.querySelector('#event-info').addEventListener('submit', (event) => {
          event.preventDefault(); // Prevent form submission
          updateCalendar(); // Update calendar events
          event.target.reset(); // Reset the form
        });
      });
    </script>
  </head>
  <body>
    
    <div class="container">
        <!-- side navigation bar -->
      <div class="navigation">
        <div class="toggle-bar">
          <a href="#">
            <span class="toggle icon">
              <i class="fa-solid fa-bars" style="color: #fff"></i>
            </span>
            <span class="title">ConfoEase </span>
          </a>
        </div>
        <ul>
          <li></li>
          <li>
            
            <a href="/admin/<%=data%>">
              <span class="icon"><i class="fa-solid fa-house"></i></span>
              <span class="title">Home</span>
            </a>
          </li>
          <li>
            <a href="/create-event/<%=data%>">
              <span class="icon"><i class="fa-solid fa-plus"></i></span>
              <span class="title">Create Event</span>
            </a>
          </li>
          <li>
            <a href="/edit-event">
              <span class="icon"
                ><i class="fa-solid fa-pen-to-square"></i
              ></span>
              <span class="title">Edit Event</span>
            </a>
          </li>
          <li>
            <a href="/manage-reviewer">
              <span class="icon"><i class="fa-solid fa-list-check"></i></span>
              <span class="title">Manage Papers</span>
            </a>
          </li>
          <li>
            <a href="/manage-reviewer/<%=data%>">
              <span class="icon"><i class="fa-solid fa-list-check"></i></span>
              <span class="title">Manage Reviewer</span>
            </a>
          </li>
          <li class="hovered">
            <a href="/admin-schedule/<%=data%>">
              <span class="icon"><i class="fa-regular fa-calendar"></i></span>
              <span class="title">Schedule</span>
            </a>
          </li>
          <li>
            <a href="/logout/<%=data%>">
              <span class="icon"
                ><i class="fa-solid fa-right-from-bracket"></i
              ></span>
              <span class="title">Logout</span>
            </a>
          </li>
        </ul>
      </div>
    <!-- side navigation bar -->

      <!-- main content -->
      <div class="main">
        <!-- top navigation bar -->
        <div class="top-bar">
            <div class="search">
              <label for="Search">
                <input type="text" placeholder="Search User" />
                <i
                  class="fa-solid fa-magnifying-glass"
                  style="color: #3867d6"
                ></i>
              </label>
            </div>
            <div class="user">
              <img src="/image/user.jpg" alt="" />
            </div>
        </div>
        <!-- top navigation bar -->

        <!-- heading for event creation -->
          <section class="home" id="home">
            <div class="content">
              <h3>Schedule <span>Event</span></h3>
            </div>
          </section>
        <!-- heading for event creation -->

        <!-- form for taking user input for conference creation -->

        <div class="form-container">
            <section class="event-creation" id="event-creation">
              <form id="event-info" method="post" action="/create-event/<%=data %>" enctype="multipart/form-data">
                <!-- Event Details -->
                <div class="schedule-details" id="schedule-details">
                  <div class="input-box">
                    <label for="schedule-details" class="heading">Event <span>Details</span></label>
                  </div>
                  <div id="schedule-list">
                    <div class="each-schedule">
                      <div class="input-box">
                        <label for="event-title">Event Title</label>
                        <label for="description">Event Description</label>
                      </div>
                      <div class="input-box">
                        <input type="text" name="title" id="event-title" placeholder="Event Title" required>
                        <input type="text" name="description" id="event-description" placeholder="Description" required/>
                      </div>
                      <div class="input-box">
                          <label for="event-start-date">Start Date</label>
                          <label for="appt">Start Time</label>
                      </div>
                      <div class="input-box">
                        <input type="date" id="event-date" name="startdate" placeholder="Start Date" required/>
                        <input type="time" id="appt" name="eventstarttime" placeholder="Event Start time" required/>
                      </div>
                      <div class="input-box">
                          <label for="event-description">Description</label>
                      </div>
                      <div class="input-box">
                        <input type="text" name="description" id="event-description" placeholder="Description" required/>
                      </div>

                      <!-- <button
                        class="remove-btn btn"
                        onclick="removeSchedule(this)"
                      >
                        Remove Event
                      </button> -->
                    </div>
                  </div>
                <!-- <button
                  class="add-btn btn"
                  onclick="addSchedule(); return false;"
                >
                  Add Event
                </button> -->
                <input
                  type="submit"
                  id="create-event-submission"
                  value="Add Event"
                  class="btn"
                  onclick="displayData()"
                />
              </div>
              <!-- Event Details -->
              <br />

  
              
              </form>
            </section>
            <section class="event-creation" id="event-creation">
                <!-- <div class="schedule-details" id="schedule-details"> --> 
                    <div id='calendar'></div>
                <!-- </div> -->
            </section>
        </div>
          <!-- form for taking user input for conference creation -->

        <!-- <div id="desc-palette" class="event-creation" >
          <div class="input-box">
            <label for="schedule-details" class="heading">Description</label>
          </div>
          <div id="desc">
            <li class="each-schedule">
              adfg
            </li>
            <li>
              dfgg
            </li>
          </div>
        </div> -->
      </div>




      </div>
      <!-- main content -->
    </div>
    

    <!-- script file -->
    <script src="/js/admin-schedule.js"></script>
    <!-- script file -->
  </body>
</html>
